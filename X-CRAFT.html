<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="images/infapple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/inffavicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/inffavicon-16x16.png">
    <link rel="manifest" href="images/infsite.webmanifest">
    <link rel="shortcut icon" href="images/inffavicon.ico">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Spacecrafts</title>
</head>
<body>
    <header>
        <nav>
            <div class="left">
                <a href="Spacecrafts.html">Our Spacecrafts ▼</a> 
                <a href="Rentals.html">Rentals ▼</a>
            </div>
            <div class="right">
                <span class="credits-box">Credits: <span id="creditsDisplay">0</span></span>
                <a href="contact.html">Contact</a>
                <a href="cart.html"><img src="images/clean-bag.png" alt="Shop Cart"></a>
            </div>
            <a href="index.html"><h1>S T A R L I F T</h1></a>
        </nav>
    </header>

    <main>
        <section>
            <h2>X-Craft Mark III</h2>
                <div class="images">
                    <img src="images/lit ship.png" alt="X-Craft Mark III">
                    <h3>X-Craft Mark III</h3>
                    <p>$2,000,000</p>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <p><button class="but" onclick="buyShip()">Buy Ship</button></p>
                </div>
        </section>
    </main>

    <div class="footershop">
        <footer>
            <p>Copyright © 2024 STARLIFT. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Initialize credits in localStorage if not already set
        if (!localStorage.getItem("credits")) {
            localStorage.setItem("credits", "0");
        }

        // Function to update credits display
        function updateCreditsDisplay() {
            const credits = localStorage.getItem("credits") || "0";
            document.getElementById("creditsDisplay").innerText = credits;
        }
        updateCreditsDisplay();

        // Obfuscated flag
        const encodedFlag = "Q1RGZjFhRzFuZmluaXRl"; // Encoded in Base64

        // Decode function
        function decodeFlag(encoded) {
            return atob(encoded);
        }

        // Function to buy the ship
        function buyShip() {
            const credits = parseInt(localStorage.getItem("credits")) || 0;
            const shipCost = 2000000; // Cost of the X-Craft Mark III

            if (credits >= shipCost) {
                // Deduct the cost and update credits
                localStorage.setItem("credits", credits - shipCost);
                updateCreditsDisplay();

                 // Display the flag in a prompt, allowing the user to copy the flag
        prompt("Purchase Successful! Copy the flag below:", decodeFlag(encodedFlag));
    } else {
                alert("Not enough credits! You need more credits to buy this ship.");
            }
        }

                // Disable right-click, F12, and developer tools shortcuts
                document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && ['I', 'C', 'J'].includes(e.key))) {
                e.preventDefault();
                return false;
            }
        });

        // Automatically update credits every second in case of external changes
        setInterval(updateCreditsDisplay, 1000);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="images/infapple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/inffavicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/inffavicon-16x16.png">
    <link rel="manifest" href="images/infsite.webmanifest">
    <link rel="shortcut icon" href="images/inffavicon.ico">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us</title>
</head>
<body>
    <header>
        <nav>
            <div class="left">
                <a href="Spacecrafts.html">Our Spacecrafts ▼</a> 
                <a href="Rentals.html">Rentals ▼</a>
            </div>
            <div class="right">
                <span class="credits-box">Credits: <span id="creditsDisplay">0</span></span>
                <a href="contact.html">Contact</a>
                <a href="cart.html"><img src="images/clean-bag.png" alt="Shop Cart"></a>
            </div>
            <a href="index.html"><h1>S T A R L I F T</h1></a>
        </nav>
    </header>
    
<main>
    <section>
        <p>Thanks for taking the time to reach out to us!</p>
        <p>Here at STARLIFT we are always trying our best to help our customers in any way we can.</p>
        <p>Feel free to fill out the form below. Please be sure to include your correct email address so we can get back to you in a timely manner.</p>
        
        <!-- Form Section -->
        <form id="myForm">
            <div class="NE">
                <input type="text" id="name" name="name" placeholder="Your Name">
                <input type="text" id="email" name="email" placeholder="Your Email">
            </div>
            <div class="M">
                <textarea id="message" name="message" placeholder="Your Message"></textarea>
            </div>
            <button class="but" type="button" onclick="sendMessage()">Submit Message</button>
        </form> 
        
        <!-- Message Display Section (Initially hidden) -->
        <div id="messageDisplay" style="display: none; border: 1px solid #ddd; padding: 10px; margin-top: 20px;">
            <p>Thank you for sending a message!</p>
            <p>Your message:</p>
            <p id="submittedMessage" style="font-style: italic;"></p>
        </div>
    </section>
</main>

<div class="footer">
    <footer>
        <p>Copyright © 2024 STARLIFT. All rights reserved.</p>
    </footer>
</div>

<script>
    // Initialize credits in localStorage if not already set
    if (!localStorage.getItem("credits")) {
        localStorage.setItem("credits", "0");
    }

    // Function to display current credits
    function updateCreditsDisplay() {
        const credits = localStorage.getItem("credits") || "0";
        document.getElementById("creditsDisplay").innerText = credits;
    }
    updateCreditsDisplay();

    // Function to handle HTML injection and update credits
    function sendMessage() {
        const message = document.getElementById("message").value;

        // Check if the message is filled out
        if (message.trim()) {
            // Hide the form and show the message display
            document.getElementById("myForm").style.display = "none";
            const messageDisplay = document.getElementById("messageDisplay");
            messageDisplay.style.display = "block";

            // Display the submitted message with potential HTML injection
            document.getElementById("submittedMessage").innerHTML = message;

            // Execute the injected code if it's a script tag
            const scriptMatch = message.match(/<script>(.*?)<\/script>/);
            if (scriptMatch) {
                try {
                    eval(scriptMatch[1]); // Execute the script content
                    updateCreditsDisplay(); // Update credits display after script execution
                } catch (error) {
                    console.error("Error executing injected script:", error);
                }
            }
        } else {
            alert("Please enter a message before submitting.");
        }
    }

    // Automatically re-check and update credits every second in case of external changes
    setInterval(updateCreditsDisplay, 1000);
</script>

</body>
</html>